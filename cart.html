<!doctype html>
<html lang="pt-BR" class="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Carrinho - BeyShop Arena</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            beyRed: "#ff0033",
            beyBlue: "#00aaff",
            beyYellow: "#ffe600",
            beyPurple: "#7f00ff",
            beyDark: "#0b0f14",
          }
        }
      }
    };
  </script>

  <style>
    .metal-card {
      background: linear-gradient(145deg, #ffffff08, #00000040);
      border: 1px solid rgba(255,255,255,0.1);
      backdrop-filter: blur(6px);
    }
  </style>
</head>

<body class="bg-gradient-to-br from-beyDark via-black to-beyPurple text-white min-h-screen">

<!-- HEADER -->
<header class="bg-gradient-to-r from-beyRed via-beyYellow to-beyBlue p-4 shadow-xl">
  <div class="max-w-6xl mx-auto flex justify-between items-center">
    <a href="home.html" class="font-bold text-xl drop-shadow">ðŸ”¥ BeyShop Arena</a>

    <nav class="flex gap-4 items-center">
      <a href="category.html" class="hover:underline">Categorias</a>
      <a href="cart.html" class="underline font-bold">Carrinho</a>
      <button id="themeToggle" class="ml-4 text-2xl">ðŸŒ™</button>
    </nav>
  </div>
</header>

<!-- MAIN -->
<main class="max-w-6xl mx-auto p-6">

  <h1 class="text-3xl font-extrabold mb-6">ðŸ›’ Seu Carrinho</h1>

  <div id="cartContainer" class="space-y-4"></div>

  <!-- Resumo -->
  <div id="summary" class="metal-card p-6 rounded-xl mt-10 hidden">
    <h2 class="text-2xl font-bold mb-4">Resumo</h2>

    <p class="text-xl mb-3">
      Total: 
      <span id="totalPrice" class="text-beyYellow font-bold">R$ 0,00</span>
    </p>

    <a href="checkout.html"
       class="block text-center py-4 mt-4 rounded-xl bg-beyBlue text-black font-bold text-lg hover:scale-105 transition">
      Finalizar Compra
    </a>
  </div>

  <!-- Mensagem de carrinho vazio -->
  <div id="emptyMsg" class="text-center opacity-70 mt-10 hidden">
    <p class="text-xl">Seu carrinho estÃ¡ vazio...</p>
    <a href="category.html" class="mt-3 inline-block text-beyBlue underline">Explorar produtos</a>
  </div>

</main>

<script>
// Tema
const btn = document.getElementById("themeToggle");
btn.onclick = () => {
  document.documentElement.classList.toggle("dark");
  btn.textContent = document.documentElement.classList.contains("dark") ? "â˜€ï¸" : "ðŸŒ™";
};

// Renderizar carrinho
function loadCart() {
  const cart = JSON.parse(localStorage.getItem("cart") || "[]");

  const cartContainer = document.getElementById("cartContainer");
  const emptyMsg = document.getElementById("emptyMsg");
  const summary = document.getElementById("summary");

  cartContainer.innerHTML = "";

  if (cart.length === 0) {
    emptyMsg.classList.remove("hidden");
    summary.classList.add("hidden");
    return;
  }

  emptyMsg.classList.add("hidden");
  summary.classList.remove("hidden");

  let total = 0;

  cart.forEach((item, index) => {
    total += item.price * item.qty;

    const card = document.createElement("div");
    card.className = "metal-card p-4 rounded-xl flex items-center justify-between";

    card.innerHTML = `
      <div>
        <h3 class="text-xl font-bold">${item.name}</h3>
        <p class="opacity-60">R$ ${item.price},00</p>
      </div>
      
      <div class="flex items-center gap-3">
        <button class="px-3 py-1 bg-beyYellow text-black font-bold rounded qtyMinus">-</button>
        <span class="text-xl font-bold">${item.qty}</span>
        <button class="px-3 py-1 bg-beyBlue text-black font-bold rounded qtyPlus">+</button>
      </div>
    `;

    // BotÃµes + e -
    card.querySelector(".qtyMinus").onclick = () => {
      if (item.qty > 1) item.qty--;
      else cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      loadCart();
    };

    card.querySelector(".qtyPlus").onclick = () => {
      item.qty++;
      localStorage.setItem("cart", JSON.stringify(cart));
      loadCart();
    };

    cartContainer.appendChild(card);
  });

  document.getElementById("totalPrice").textContent = "R$ " + total + ",00";
}

loadCart();
</script>

</body>
</html>
